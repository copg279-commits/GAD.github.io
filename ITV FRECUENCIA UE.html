<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador Frecuencia ITV Europa</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col pb-16">

    <header class="bg-blue-600 w-full flex justify-center items-center py-2">
        <div class="w-40 h-40 rounded-full overflow-hidden shadow-lg">
            <img src="logogad.png" alt="Logo GAD" class="w-full h-full object-cover block">
        </div>
    </header>

    <h1 class="text-black text-center mt-6 text-xl font-bold px-4">
        Buscador Frecuencia ITV Europa
    </h1>

    <div class="w-11/12 max-w-md mx-auto mt-4">
        <p class="text-center mb-2">
            Introduce el nombre de un país de la UE para ver la frecuencia de la ITV:
        </p>
        <input 
            type="text" 
            id="searchInput" 
            placeholder="Ej: España" 
            class="w-full p-3 text-base border border-gray-300 rounded-md text-center focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
        <button 
            onclick="buscarPais()" 
            class="block mx-auto mt-4 w-full bg-blue-600 text-white font-bold py-3 rounded-md hover:bg-blue-700 transition"
        >
            Buscar por País
        </button>
    </div>

    <div class="w-11/12 max-w-md mx-auto mt-6">
        <p class="text-center mb-2">
            Calcula la primera ITV de una motocicleta francesa:
        </p>
        <p class="text-center mb-2 font-bold">
            Introduce fecha 1ª matriculación:
        </p>
        <input 
            type="date" 
            id="fechaMatriculacionMotoFrancia" 
            class="w-full p-3 text-base border border-gray-300 rounded-md text-center focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
        <button 
            onclick="calcularItvMotosFrancia()" 
            class="block mx-auto mt-4 w-full bg-green-600 text-white font-bold py-3 rounded-md hover:bg-green-700 transition"
        >
            Calcular 1ª ITV Moto Francia
        </button>
    </div>

    <div id="resultado" class="mt-6 p-4 bg-white shadow rounded-lg w-11/12 max-w-md mx-auto text-left">
        <p class="text-gray-500" id="resultText">
            La frecuencia de la ITV para el país seleccionado o la fecha de la primera ITV para una motocicleta francesa aparecerá aquí.
        </p>
    </div>

    <div class="mt-8 flex justify-center">
    <button onclick="window.location.href='_MENU PRINCIPAL_.html'"
            class="w-11/12 max-w-md p-4 bg-yellow-300 text-gray-800 font-bold rounded-lg shadow-md hover:bg-yellow-400 transition">
        MENÚ PRINCIPAL
    </button>
</div>

    <footer class="mt-auto text-center py-6 bg-gray-200">
        <hr class="border-t border-gray-400 w-11/12 max-w-md mx-auto mb-4">
        <p class="font-bold">GRUPO DE ANÁLISIS DOCUMENTAL</p>
        <p class="font-bold">POLICÍA LOCAL DE ALICANTE</p>
        <p>GAD - Todos los derechos reservados</p>
    </footer>

    <script>
        const itvFrequencies = {
            "alemania": {
                turismos: "Primera ITV a los 3 años, luego cada 2 años.",
                motos: "Primera ITV a los 2 años, luego cada 2 años."
            },
            "austria": {
                turismos: "Primera ITV a los 3 años, luego 2 años, luego anual.",
                motos: "Primera ITV a los 3 años, luego 2 años, luego anual."
            },
            "belgica": {
                turismos: "Primera ITV a los 4 años, luego anual.",
                motos: "Primera ITV a los 4 años, luego cada 2 años."
            },
            "dinamarca": {
                turismos: "Primera ITV a los 4 años, luego cada 2 años.",
                motos: "Primera ITV a los 4 años, luego cada 2 años."
            },
            "españa": {
                turismos: "Primera ITV a los 4 años, luego cada 2 años (hasta los 10 años), luego anual.",
                motos: "Primera ITV a los 4 años, luego cada 2 años."
            },
            "francia": {
                turismos: "Primera ITV a los 4 años, luego cada 2 años.",
                motos: "Normativa especial. Utiliza el calculador de abajo."
            },
            "grecia": {
                turismos: "Primera ITV a los 4 años, luego cada 2 años.",
                motos: "Primera ITV a los 4 años, luego cada 2 años."
            },
            "irlanda": {
                turismos: "Primera ITV a los 4 años, luego cada 2 años (hasta los 10 años), luego anual.",
                motos: "Exención de inspección obligatoria."
            },
            "italia": {
                turismos: "Primera ITV a los 4 años, luego cada 2 años.",
                motos: "Primera ITV a los 4 años, luego cada 2 años."
            },
            "luxemburgo": {
                turismos: "Primera ITV a los 4 años, luego 2 años, luego anual.",
                motos: "Primera ITV a los 4 años, luego cada 2 años."
            },
            "paises bajos": {
                turismos: "Primera ITV a los 4 años, luego anual.",
                motos: "Exención de inspección obligatoria."
            },
            "polonia": {
                turismos: "Primera ITV a los 3 años, luego 2 años, luego anual.",
                motos: "Primera ITV a los 3 años, luego 2 años, luego anual."
            },
            "portugal": {
                turismos: "Primera ITV a los 4 años, luego cada 2 años (hasta los 8 años), luego anual.",
                motos: "Exención de inspección obligatoria."
            },
            "reino unido": {
                turismos: "Primera ITV (MOT) a los 3 años, luego anual.",
                motos: "Primera ITV (MOT) a los 3 años, luego anual."
            },
            "suecia": {
                turismos: "Primera ITV a los 3 años, luego 2 años, luego anual.",
                motos: "Primera ITV a los 3 años, luego 2 años, luego anual."
            }
        };

        function mostrarResultado(html, esError = false) {
            const resultadoDiv = document.getElementById('resultado');
            const resultadoText = document.getElementById('resultText');
            resultadoText.innerHTML = html;
            resultadoDiv.classList.toggle('bg-red-200', esError);
            resultadoDiv.classList.toggle('bg-white', !esError);
            resultadoText.classList.toggle('text-center', esError);
            resultadoText.classList.toggle('text-left', !esError);
        }

        function buscarPais() {
            const input = document.getElementById('searchInput').value.trim().toLowerCase();
            if (!input) {
                mostrarResultado("Por favor, introduce un país.", true);
                return;
            }

            const paisData = itvFrequencies[input];
            if (paisData) {
                const html = `
                    <div class="mb-2">
                        <p><span class="font-bold text-lg">${input.toUpperCase()}:</span></p>
                        <p><span class="font-bold">Turismos:</span> ${paisData.turismos}</p>
                        <p><span class="font-bold">Motocicletas:</span> ${paisData.motos}</p>
                    </div>
                `;
                mostrarResultado(html);
            } else {
                mostrarResultado("País no encontrado o no disponible en la lista.", true);
            }
        }

        function calcularItvMotosFrancia() {
            const inputFecha = document.getElementById('fechaMatriculacionMotoFrancia').value;
            if (!inputFecha) {
                mostrarResultado("Por favor, introduce una fecha de matriculación.", true);
                return;
            }

            const fechaMatriculacion = new Date(inputFecha);
            const anioMatriculacion = fechaMatriculacion.getFullYear();
            const fechaActual = new Date();
            
            let fechaLimiteItv;

            if (anioMatriculacion < 2017) {
                fechaLimiteItv = new Date('2024-12-31');
            } else if (anioMatriculacion >= 2017 && anioMatriculacion <= 2019) {
                fechaLimiteItv = new Date(anioMatriculacion + 8, fechaMatriculacion.getMonth() + 4, fechaMatriculacion.getDate());
            } else if (anioMatriculacion >= 2020 && anioMatriculacion <= 2021) {
                fechaLimiteItv = new Date(anioMatriculacion + 6, fechaMatriculacion.getMonth() + 4, fechaMatriculacion.getDate());
            } else { // a partir de 2022
                fechaLimiteItv = new Date(anioMatriculacion + 5, fechaMatriculacion.getMonth(), fechaMatriculacion.getDate());
            }

            const fechaFormateada = fechaLimiteItv.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' });
            
            if (fechaLimiteItv < fechaActual) {
                mostrarResultado(`<p style="color: red; font-weight: bold;">ITV caducada el ${fechaFormateada}.</p>`);
            } else {
                mostrarResultado(`<p>La primera ITV de la motocicleta francesa deberá pasarse antes del *<span style="color: green; font-weight: bold;">${fechaFormateada}</span>*.</p>`);
            }
        }

        // Permite la búsqueda al presionar Enter en los campos de entrada
        document.getElementById('searchInput').addEventListener('keypress', function(event) {
            if (event.key === "Enter") {
                buscarPais();
            }
        });

        document.getElementById('fechaMatriculacionMotoFrancia').addEventListener('keypress', function(event) {
            if (event.key === "Enter") {
                calcularItvMotosFrancia();
            }
        });
    </script>
</body>
</html>